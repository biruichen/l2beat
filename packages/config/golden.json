{
  "type": "layer2",
  "id": "xlayer",
  "display": {
    "name": "X Layer",
    "slug": "xlayer",
    "description": "X Layer is Validium by OKX with seamless integration with OKX products. It is powered by the Polygon CDK.",
    "headerWarning": "X Layer is using AggLayer, meaning it shares the TVL escrow contracts with Polygon zkEVM and other connected chains.",
    "purposes": [
      "Universal"
    ],
    "links": {
      "websites": [
        "https://okx.com/x1"
      ],
      "apps": [],
      "documentation": [
        "https://okx.com/xlayer/docs"
      ],
      "explorers": [
        "https://okx.com/explorer/xlayer"
      ],
      "repositories": [],
      "socialMedia": [
        "https://twitter.com/XLayerOfficial"
      ]
    },
    "activityDataSource": "Blockchain RPC",
    "category": "Validium",
    "provider": "Polygon",
    "tvlWarning": {
      "content": "The TVL is currently shared among all projects using the shared Polygon CDK contracts.",
      "sentiment": "warning"
    },
    "finality": {
      "finalizationPeriod": 0,
      "warnings": {
        "timeToInclusion": "Uniform block distribution is assumed for calculations."
      }
    }
  },
  "config": {
    "escrows": [],
    "transactionApi": {
      "type": "rpc",
      "startBlock": 1,
      "defaultUrl": "https://rpc.xlayer.tech",
      "defaultCallsPerMinute": 500
    },
    "liveness": {
      "duplicateData": {
        "from": "stateUpdates",
        "to": "proofSubmissions"
      }
    }
  },
  "dataAvailability": {
    "layer": {
      "value": "DAC",
      "sentiment": "warning",
      "description": "The data is posted off chain and a Data Availability Committee (DAC) is responsible for protecting and supplying it."
    },
    "bridge": {
      "value": "2/2 DAC Members",
      "sentiment": "bad",
      "description": "There is a threshold of 2/2 members that must sign and attest that the data is correct and available."
    },
    "mode": "Transactions data"
  },
  "riskView": {
    "stateValidation": {
      "value": "ZK proofs (SN)",
      "description": "zkSNARKS are zero knowledge proofs that ensure state correctness, but require trusted setup.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "dataAvailability": {
      "value": "External (DAC)",
      "description": "Proof construction relies fully on data that is NOT published on chain. There exists a Data Availability Committee (DAC) with a threshold of 2/2 that is tasked with protecting and supplying the data.",
      "sentiment": "bad",
      "sources": [
        {
          "contract": "XLayerValidiumEtrog",
          "references": []
        }
      ]
    },
    "exitWindow": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    },
    "sequencerFailure": {
      "value": "No mechanism",
      "description": "There is no mechanism to have transactions be included if the sequencer is down or censoring. Although the functionality exists in the code, it is currently disabled.",
      "sentiment": "bad",
      "sources": [
        {
          "contract": "XLayerValidiumEtrog",
          "references": []
        }
      ]
    },
    "proposerFailure": {
      "value": "Self propose",
      "description": "If the Proposer fails, users can leverage the source available prover to submit proofs to the L1 bridge. There is a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "destinationToken": {
      "value": "Native & Canonical",
      "description": "ETH transferred via this bridge is used to pay for gas and other tokens transferred are considered canonical on the destination chain.",
      "sentiment": "good"
    },
    "validatedBy": {
      "value": "Ethereum",
      "description": "Smart contracts on Ethereum validate all bridge transfers.",
      "sentiment": "good"
    },
    "sourceUpgradeability": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    }
  },
  "stage": {
    "stage": "NotApplicable"
  },
  "technology": {
    "newCryptography": {
      "name": "Zero knowledge STARK and SNARK cryptography is used",
      "description": "Despite their production use zkSTARKs and zkSNARKs proof systems are still relatively new, complex and they rely on the proper implementation of the polynomial constraints used to check validity of the Execution Trace. In addition zkSNARKs require a trusted setup to operate.",
      "risks": [
        {
          "category": "Funds can be lost if",
          "text": "the proof system is implemented incorrectly."
        }
      ],
      "references": []
    },
    "stateCorrectness": {
      "name": "Validity proofs ensure state correctness",
      "description": "Each update to the system state must be accompanied by a ZK proof that ensures that the new state was derived by correctly applying a series of valid user transactions to the previous state. These proofs are then verified on Ethereum by a smart contract.",
      "risks": [],
      "references": [
        {
          "text": "PolygonRollupManager.sol - Etherscan source code, _verifyAndRewardBatches function",
          "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
        }
      ]
    },
    "dataAvailability": {
      "name": "Data is not stored on chain",
      "description": "The transaction data is not recorded on the Ethereum main chain. Transaction data is stored off-chain and only the hashes are posted on-chain by the Sequencer, after being signed by the DAC members.",
      "risks": [
        {
          "category": "Funds can be lost if",
          "text": "the external data becomes unavailable.",
          "isCritical": true
        }
      ],
      "references": [
        {
          "text": "XLayerValidiumEtrog.sol - Etherscan source code, sequenceBatches function",
          "href": "https://etherscan.io/address/0x2B0ee28D4D51bC9aDde5E58E295873F61F4a0507"
        }
      ]
    },
    "operator": {
      "name": "The system has a centralized sequencer",
      "description": "Only a trusted sequencer is allowed to submit transaction batches. A mechanism for users to submit their own batches is currently disabled.",
      "risks": [
        {
          "category": "MEV can be extracted if",
          "text": "the operator exploits their centralized position and frontruns user transactions."
        },
        {
          "category": "Funds can be frozen if",
          "text": "the sequencer refuses to include an exit transaction.",
          "isCritical": true
        }
      ],
      "references": [
        {
          "text": "XLayerValidiumEtrog.sol - Etherscan source code, onlyTrustedSequencer modifier",
          "href": "https://etherscan.io/address/0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C"
        }
      ]
    },
    "forceTransactions": {
      "name": "Users can't force any transaction",
      "description": "The mechanism for allowing users to submit their own transactions is currently disabled.",
      "risks": [
        {
          "category": "Users can be censored if",
          "text": "the operator refuses to include their transactions."
        }
      ],
      "references": [
        {
          "text": "XLayerValidiumEtrog.sol - Etherscan source code, forceBatchAddress address",
          "href": "https://etherscan.io/address/0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C"
        }
      ]
    },
    "exitMechanisms": [
      {
        "name": "Regular exit",
        "description": "The user initiates the withdrawal by submitting a regular transaction on this chain. When the block containing that transaction is proven the funds become available for withdrawal on L1. Finally the user submits an L1 transaction to claim the funds. This transaction requires a merkle proof.",
        "risks": [],
        "references": [
          {
            "text": "PolygonZkEvmBridgeV2.sol - Etherscan source code, claimAsset function",
            "href": "https://etherscan.io/address/0x0FeB850B183C57534b56b7d56520133C8f9BDB65"
          }
        ]
      }
    ]
  },
  "permissions": [
    {
      "name": "ProxyAdminOwner",
      "accounts": [
        {
          "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
          "type": "Contract"
        }
      ],
      "description": "Admin of the XLayerValidiumEtrog rollup, can set core system parameters like timeouts, sequencer, activate forced transactions and update the DA mode."
    },
    {
      "name": "Sequencer",
      "accounts": [
        {
          "address": "0xAF9d27ffe4d51eD54AC8eEc78f2785D7E11E5ab1",
          "type": "EOA"
        }
      ],
      "description": "Its sole purpose and ability is to submit transaction batches. In case they are unavailable users cannot rely on the force batch mechanism because it is currently disabled."
    },
    {
      "name": "Proposer (Trusted Aggregator)",
      "accounts": [
        {
          "address": "0x6329Fe417621925C81c16F9F9a18c203C21Af7ab",
          "type": "EOA"
        },
        {
          "address": "0x20A53dCb196cD2bcc14Ece01F358f1C849aA51dE",
          "type": "EOA"
        }
      ],
      "description": "The trusted proposer (called Aggregator) provides ZK proofs for all the supported systems. In case they are unavailable a mechanism for users to submit proofs on their own exists, but is behind a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state."
    },
    {
      "name": "SecurityCouncil",
      "description": "The Security Council is a multisig that can be used to trigger the emergency state which pauses bridge functionality, restricts advancing system state and removes the upgradeability delay. This is a Gnosis Safe with 6 / 8 threshold.",
      "accounts": [
        {
          "address": "0x37c58Dfa7BF0A165C5AAEdDf3e2EdB475ac6Dcb6",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "SecurityCouncil participants",
      "description": "Those are the participants of the SecurityCouncil.",
      "accounts": [
        {
          "address": "0xFe45baf0F18c207152A807c1b05926583CFE2e4b",
          "type": "EOA"
        },
        {
          "address": "0xaF46a0ddf80DFFB49C87656625E65A37499B261D",
          "type": "EOA"
        },
        {
          "address": "0xBDc235cC9d6Baa641c5ae306bc83962475A5FEFf",
          "type": "EOA"
        },
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0x3ab9f4b964eE665F7CDf1d65f1cEEc6196B0D622",
          "type": "EOA"
        },
        {
          "address": "0x49c15936864690bCd6af0ecaca8E874adFF30E86",
          "type": "EOA"
        },
        {
          "address": "0x9F7dfAb2222A473284205cdDF08a677726d786A0",
          "type": "EOA"
        },
        {
          "address": "0x21887c89368bf918346c62460e0c339113801C28",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "Forced Batcher",
      "accounts": [
        {
          "address": "0x491619874b866c3cDB7C8553877da223525ead01",
          "type": "EOA"
        }
      ],
      "description": "Sole account allowed to submit forced transactions. If this address is the zero address, anyone can submit forced transactions."
    },
    {
      "name": "RollupManagerAdminMultisig",
      "description": "Admin of the PolygonRollupManager contract, can set core system parameters like timeouts and aggregator as well as deactivate emergency state. They can also upgrade the XLayerValidiumEtrog contracts, but are restricted by a 10d delay unless rollup is put in the Emergency State. This is a Gnosis Safe with 2 / 3 threshold.",
      "accounts": [
        {
          "address": "0x242daE44F5d8fb54B198D03a94dA45B5a4413e21",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "RollupManagerAdminMultisig participants",
      "description": "Those are the participants of the RollupManagerAdminMultisig.",
      "accounts": [
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0xA0B02B28920812324f1cC3255bd8840867d3f227",
          "type": "EOA"
        },
        {
          "address": "0xEad77b01ea770839F7f576Cd1516Ff6A298d9dB2",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    }
  ],
  "contracts": {
    "addresses": [
      {
        "name": "XLayerValidiumDAC",
        "address": "0x05652Ec92366F3C2255991a265c499E01Ba58e6a",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0xd620Ca1ad5c3888e4521c3374cE4088Cb78079b8",
          "admin": "0x1e37EA18e9515db29b3E94A00eD31484A3130204"
        },
        "chain": "ethereum",
        "description": "Validium committee contract that allows the admin to setup the members of the committee and stores the required amount of signatures threshold.",
        "upgradableBy": [
          "ProxyAdminOwner"
        ],
        "upgradeDelay": "No delay"
      },
      {
        "name": "XLayerValidiumEtrog",
        "address": "0x2B0ee28D4D51bC9aDde5E58E295873F61F4a0507",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C",
          "admin": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2"
        },
        "chain": "ethereum",
        "description": "The main contract of the X Layer. Contains sequenced transaction batch hashes and forced transaction logic.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "XLayerVerifier",
        "address": "0x0775e11309d75aA6b0967917fB0213C5673eDf81",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "An autogenerated contract that verifies ZK proofs in the PolygonRollupManager system."
      },
      {
        "name": "PolygonRollupManager",
        "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "It defines the rules of the system including core system parameters, permissioned actors as well as emergency procedures. The emergency state can be activated either by the Security Council, by proving a soundness error or by presenting a sequenced batch that has not been aggregated before a 7d timeout. This contract receives L2 state roots as well as ZK proofs.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Bridge",
        "address": "0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x0FeB850B183C57534b56b7d56520133C8f9BDB65",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "The escrow contract for user funds. It is mirrored on the L2 side and can be used to transfer both ERC20 assets and arbitrary messages. To transfer funds a user initiated transaction on both sides is required.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "GlobalExitRootV2",
        "address": "0x580bda1e7A0CFAe92Fa7F6c20A3794F169CE3CFb",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x2E38cD55163137483E30580Cb468C2dFf1d85077",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "Synchronizes deposit and withdraw merkle trees across L1 and the L2s. The global root from this contract is injected into the L2 contracts.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Timelock",
        "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "Contract upgrades have to go through a 10d timelock unless the Emergency State is activated. It can also add rollup types that can be used to upgrade verifier contracts of existing systems. It is controlled by the ProxyAdminOwner."
      }
    ],
    "references": [
      {
        "text": "State injections - stateRoot and exitRoot are part of the validity proof input.",
        "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
      }
    ],
    "risks": [
      {
        "category": "Funds can be stolen if",
        "text": "a contract receives a malicious code upgrade. There is a 10d delay on code upgrades."
      }
    ]
  },
  "milestones": [
    {
      "name": "X Layer Public Launch",
      "link": "https://x.com/XLayerOfficial/status/1780056275898048562",
      "date": "2024-04-16",
      "description": "X Layer is now accessible to everyone."
    }
  ],
  "knowledgeNuggets": []
}

{
  "type": "layer2",
  "id": "astarzkevm",
  "display": {
    "name": "Astar zkEVM",
    "slug": "astarzkevm",
    "description": "Astar zkEVM is a Validium that leverages Polygon's CDK and zero-knowledge cryptography to enable off-chain transactions while maintaining EVM equivalence.",
    "purposes": [
      "Universal"
    ],
    "headerWarning": "Astar zkEVM is using AggLayer, meaning it shares the TVL escrow contracts with Polygon zkEVM and other connected chains. For now, you can check its TVL [here](https://dune.com/hashed_official/astar-zkevm). We have not verified it so proceed with caution.",
    "links": {
      "websites": [
        "https://astar.network/astar2"
      ],
      "apps": [],
      "documentation": [
        "https://docs.astar.network/docs/build/zkEVM/"
      ],
      "explorers": [
        "https://astar-zkevm.explorer.startale.com/"
      ],
      "repositories": [],
      "socialMedia": [
        "https://twitter.com/AstarNetwork",
        "https://discord.com/invite/astarnetwork",
        "https://youtube.com/@AstarNetwork",
        "https://t.me/PlasmOfficial"
      ]
    },
    "activityDataSource": "Blockchain RPC",
    "category": "Validium",
    "provider": "Polygon",
    "tvlWarning": {
      "content": "The TVL is currently shared among all projects using the shared Polygon CDK contracts.",
      "sentiment": "warning"
    },
    "finality": {
      "finalizationPeriod": 0,
      "warnings": {
        "timeToInclusion": "Uniform block distribution is assumed for calculations."
      }
    }
  },
  "config": {
    "escrows": [],
    "transactionApi": {
      "type": "rpc",
      "startBlock": 1,
      "defaultUrl": "https://evm.astar.network",
      "defaultCallsPerMinute": 500
    },
    "liveness": {
      "duplicateData": {
        "from": "stateUpdates",
        "to": "proofSubmissions"
      }
    }
  },
  "dataAvailability": {
    "layer": {
      "value": "DAC",
      "sentiment": "warning",
      "description": "The data is posted off chain and a Data Availability Committee (DAC) is responsible for protecting and supplying it."
    },
    "bridge": {
      "value": "3/5 DAC Members",
      "sentiment": "bad",
      "description": "There is a threshold of 3/5 members that must sign and attest that the data is correct and available."
    },
    "mode": "Transactions data"
  },
  "riskView": {
    "stateValidation": {
      "value": "ZK proofs (SN)",
      "description": "zkSNARKS are zero knowledge proofs that ensure state correctness, but require trusted setup.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "dataAvailability": {
      "value": "External (DAC)",
      "description": "Proof construction relies fully on data that is NOT published on chain. There exists a Data Availability Committee (DAC) with a threshold of 3/5 that is tasked with protecting and supplying the data.",
      "sentiment": "bad",
      "sources": [
        {
          "contract": "AstarValidiumEtrog",
          "references": []
        }
      ]
    },
    "exitWindow": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    },
    "sequencerFailure": {
      "value": "No mechanism",
      "description": "There is no mechanism to have transactions be included if the sequencer is down or censoring. Although the functionality exists in the code, it is currently disabled.",
      "sentiment": "bad",
      "sources": [
        {
          "contract": "AstarValidiumEtrog",
          "references": []
        }
      ]
    },
    "proposerFailure": {
      "value": "Self propose",
      "description": "If the Proposer fails, users can leverage the source available prover to submit proofs to the L1 bridge. There is a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "destinationToken": {
      "value": "Native & Canonical",
      "description": "ETH transferred via this bridge is used to pay for gas and other tokens transferred are considered canonical on the destination chain.",
      "sentiment": "good"
    },
    "validatedBy": {
      "value": "Ethereum",
      "description": "Smart contracts on Ethereum validate all bridge transfers.",
      "sentiment": "good"
    },
    "sourceUpgradeability": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    }
  },
  "stage": {
    "stage": "NotApplicable"
  },
  "technology": {
    "newCryptography": {
      "name": "Zero knowledge STARK and SNARK cryptography is used",
      "description": "Despite their production use zkSTARKs and zkSNARKs proof systems are still relatively new, complex and they rely on the proper implementation of the polynomial constraints used to check validity of the Execution Trace. In addition zkSNARKs require a trusted setup to operate.",
      "risks": [
        {
          "category": "Funds can be lost if",
          "text": "the proof system is implemented incorrectly."
        }
      ],
      "references": []
    },
    "stateCorrectness": {
      "name": "Validity proofs ensure state correctness",
      "description": "Each update to the system state must be accompanied by a ZK proof that ensures that the new state was derived by correctly applying a series of valid user transactions to the previous state. These proofs are then verified on Ethereum by a smart contract.",
      "risks": [],
      "references": [
        {
          "text": "PolygonRollupManager.sol - Etherscan source code, _verifyAndRewardBatches function",
          "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
        }
      ]
    },
    "dataAvailability": {
      "name": "Data is not stored on chain",
      "description": "The transaction data is not recorded on the Ethereum main chain. Transaction data is stored off-chain and only the hashes are posted on-chain by the Sequencer, after being signed by the DAC members.",
      "risks": [
        {
          "category": "Funds can be lost if",
          "text": "the external data becomes unavailable.",
          "isCritical": true
        }
      ],
      "references": [
        {
          "text": "AstarValidiumEtrog.sol - Etherscan source code, sequenceBatches function",
          "href": "https://etherscan.io/address/0x519E42c24163192Dca44CD3fBDCEBF6be9130987"
        }
      ]
    },
    "operator": {
      "name": "The system has a centralized sequencer",
      "description": "Only a trusted sequencer is allowed to submit transaction batches. A mechanism for users to submit their own batches is currently disabled.",
      "risks": [
        {
          "category": "MEV can be extracted if",
          "text": "the operator exploits their centralized position and frontruns user transactions."
        },
        {
          "category": "Funds can be frozen if",
          "text": "the sequencer refuses to include an exit transaction.",
          "isCritical": true
        }
      ],
      "references": [
        {
          "text": "AstarValidiumEtrog.sol - Etherscan source code, onlyTrustedSequencer modifier",
          "href": "https://etherscan.io/address/0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C"
        }
      ]
    },
    "forceTransactions": {
      "name": "Users can't force any transaction",
      "description": "The mechanism for allowing users to submit their own transactions is currently disabled.",
      "risks": [
        {
          "category": "Users can be censored if",
          "text": "the operator refuses to include their transactions."
        }
      ],
      "references": [
        {
          "text": "AstarValidiumEtrog.sol - Etherscan source code, forceBatchAddress address",
          "href": "https://etherscan.io/address/0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C"
        }
      ]
    },
    "exitMechanisms": [
      {
        "name": "Regular exit",
        "description": "The user initiates the withdrawal by submitting a regular transaction on this chain. When the block containing that transaction is proven the funds become available for withdrawal on L1. Finally the user submits an L1 transaction to claim the funds. This transaction requires a merkle proof.",
        "risks": [],
        "references": [
          {
            "text": "PolygonZkEvmBridgeV2.sol - Etherscan source code, claimAsset function",
            "href": "https://etherscan.io/address/0x0FeB850B183C57534b56b7d56520133C8f9BDB65"
          }
        ]
      }
    ]
  },
  "stateDerivation": {
    "nodeSoftware": "Node software can be found [here](https://github.com/0xPolygon/cdk-validium-node).",
    "compressionScheme": "No compression scheme yet.",
    "genesisState": "The genesis state, whose corresponding root is accessible as Batch 0 root in the `getRollupBatchNumToStateRoot` method of PolygonRollupManager, is available [here](https://github.com/0xPolygonHermez/zkevm-contracts/blob/1ad7089d04910c319a257ff4f3674ffd6fc6e64e/tools/addRollupType/genesis.json).",
    "dataFormat": "The trusted sequencer request signatures from DAC members off-chain, and posts hashed batches with signatures to the AstarValidiumEtrog contract."
  },
  "permissions": [
    {
      "name": "ProxyAdminOwner",
      "accounts": [
        {
          "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
          "type": "Contract"
        }
      ],
      "description": "Admin of the AstarValidiumEtrog rollup, can set core system parameters like timeouts, sequencer, activate forced transactions and update the DA mode."
    },
    {
      "name": "Sequencer",
      "accounts": [
        {
          "address": "0xD49CD5f9776A54fAe89B68205F6Af69586F98203",
          "type": "EOA"
        }
      ],
      "description": "Its sole purpose and ability is to submit transaction batches. In case they are unavailable users cannot rely on the force batch mechanism because it is currently disabled."
    },
    {
      "name": "Proposer (Trusted Aggregator)",
      "accounts": [
        {
          "address": "0x6329Fe417621925C81c16F9F9a18c203C21Af7ab",
          "type": "EOA"
        },
        {
          "address": "0x20A53dCb196cD2bcc14Ece01F358f1C849aA51dE",
          "type": "EOA"
        }
      ],
      "description": "The trusted proposer (called Aggregator) provides ZK proofs for all the supported systems. In case they are unavailable a mechanism for users to submit proofs on their own exists, but is behind a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state."
    },
    {
      "name": "SecurityCouncil",
      "description": "The Security Council is a multisig that can be used to trigger the emergency state which pauses bridge functionality, restricts advancing system state and removes the upgradeability delay. This is a Gnosis Safe with 6 / 8 threshold.",
      "accounts": [
        {
          "address": "0x37c58Dfa7BF0A165C5AAEdDf3e2EdB475ac6Dcb6",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "SecurityCouncil participants",
      "description": "Those are the participants of the SecurityCouncil.",
      "accounts": [
        {
          "address": "0xFe45baf0F18c207152A807c1b05926583CFE2e4b",
          "type": "EOA"
        },
        {
          "address": "0xaF46a0ddf80DFFB49C87656625E65A37499B261D",
          "type": "EOA"
        },
        {
          "address": "0xBDc235cC9d6Baa641c5ae306bc83962475A5FEFf",
          "type": "EOA"
        },
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0x3ab9f4b964eE665F7CDf1d65f1cEEc6196B0D622",
          "type": "EOA"
        },
        {
          "address": "0x49c15936864690bCd6af0ecaca8E874adFF30E86",
          "type": "EOA"
        },
        {
          "address": "0x9F7dfAb2222A473284205cdDF08a677726d786A0",
          "type": "EOA"
        },
        {
          "address": "0x21887c89368bf918346c62460e0c339113801C28",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "Forced Batcher",
      "accounts": [
        {
          "address": "0xf98ee8c46baEa2B11e4f0450AD9D01861265F76E",
          "type": "MultiSig"
        }
      ],
      "description": "Sole account allowed to submit forced transactions. If this address is the zero address, anyone can submit forced transactions."
    },
    {
      "name": "RollupManagerAdminMultisig",
      "description": "Admin of the PolygonRollupManager contract, can set core system parameters like timeouts and aggregator as well as deactivate emergency state. They can also upgrade the AstarValidiumEtrog contracts, but are restricted by a 10d delay unless rollup is put in the Emergency State. This is a Gnosis Safe with 2 / 3 threshold.",
      "accounts": [
        {
          "address": "0x242daE44F5d8fb54B198D03a94dA45B5a4413e21",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "RollupManagerAdminMultisig participants",
      "description": "Those are the participants of the RollupManagerAdminMultisig.",
      "accounts": [
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0xA0B02B28920812324f1cC3255bd8840867d3f227",
          "type": "EOA"
        },
        {
          "address": "0xEad77b01ea770839F7f576Cd1516Ff6A298d9dB2",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    }
  ],
  "contracts": {
    "addresses": [
      {
        "name": "AstarValidiumDAC",
        "address": "0x9CCD205052c732Ac1Df2cf7bf8aACC0E371eE0B0",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0xF4e87685e323818E0aE35dCdFc3B65106002E456",
          "admin": "0x1963D7b78e75A5eDfF9e5376E7A07A935Fb3d50d"
        },
        "chain": "ethereum",
        "description": "Validium committee contract that allows the admin to setup the members of the committee and stores the required amount of signatures threshold.",
        "upgradableBy": [
          "ProxyAdminOwner"
        ],
        "upgradeDelay": "None"
      },
      {
        "name": "AstarValidiumEtrog",
        "address": "0x1E163594e13030244DCAf4cDfC2cd0ba3206DA80",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x10D296e8aDd0535be71639E5D1d1c30ae1C6bD4C",
          "admin": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2"
        },
        "chain": "ethereum",
        "description": "The main contract of the Astar zkEVM. Contains sequenced transaction batch hashes and forced transaction logic.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "AstarVerifier",
        "address": "0x0775e11309d75aA6b0967917fB0213C5673eDf81",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "An autogenerated contract that verifies ZK proofs in the PolygonRollupManager system."
      },
      {
        "name": "PolygonRollupManager",
        "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "It defines the rules of the system including core system parameters, permissioned actors as well as emergency procedures. The emergency state can be activated either by the Security Council, by proving a soundness error or by presenting a sequenced batch that has not been aggregated before a 7d timeout. This contract receives L2 state roots as well as ZK proofs.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Bridge",
        "address": "0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x0FeB850B183C57534b56b7d56520133C8f9BDB65",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "The escrow contract for user funds. It is mirrored on the L2 side and can be used to transfer both ERC20 assets and arbitrary messages. To transfer funds a user initiated transaction on both sides is required.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "GlobalExitRootV2",
        "address": "0x580bda1e7A0CFAe92Fa7F6c20A3794F169CE3CFb",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x2E38cD55163137483E30580Cb468C2dFf1d85077",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "Synchronizes deposit and withdraw merkle trees across L1 and the L2s. The global root from this contract is injected into the L2 contracts.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Timelock",
        "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "Contract upgrades have to go through a 10d timelock unless the Emergency State is activated. It can also add rollup types that can be used to upgrade verifier contracts of existing systems. It is controlled by the ProxyAdminOwner."
      }
    ],
    "references": [
      {
        "text": "State injections - stateRoot and exitRoot are part of the validity proof input.",
        "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
      }
    ],
    "risks": [
      {
        "category": "Funds can be stolen if",
        "text": "a contract receives a malicious code upgrade. There is a 10d delay on code upgrades."
      }
    ]
  },
  "milestones": [
    {
      "name": "Astar zkEVM Launch",
      "link": "https://polygon.technology/blog/astar-zkevm-built-with-polygon-cdk-connects-to-agglayer-and-taps-unified-liquidity-with-polygon-zkevm",
      "date": "2024-03-06",
      "description": "Astar Network launched Astar zkEVM, integrated with Polygon AggLayer."
    }
  ],
  "knowledgeNuggets": []
}

{
  "type": "layer2",
  "id": "polygonzkevm",
  "display": {
    "name": "Polygon zkEVM",
    "slug": "polygonzkevm",
    "warning": "The forced transaction mechanism is currently disabled.",
    "description": "Polygon zkEVM is a EVM-compatible ZK Rollup built by Polygon Labs.",
    "purposes": [
      "Universal"
    ],
    "links": {
      "websites": [
        "https://polygon.technology/polygon-zkevm"
      ],
      "apps": [
        "https://bridge.zkevm-rpc.com"
      ],
      "documentation": [
        "https://wiki.polygon.technology/docs/zkEVM/introduction"
      ],
      "explorers": [
        "https://zkevm.polygonscan.com/",
        "https://explorer.mainnet.zkevm-test.net/"
      ],
      "repositories": [
        "https://github.com/0xPolygonHermez"
      ],
      "socialMedia": [
        "https://twitter.com/0xPolygon",
        "https://discord.gg/XvpHAxZ",
        "https://polygon.technology/blog-tags/polygon-zk"
      ],
      "rollupCodes": "https://rollup.codes/polygon-zkevm"
    },
    "activityDataSource": "Blockchain RPC",
    "liveness": {
      "explanation": "Polygon zkEVM is a ZK rollup that posts transaction data to the L1. For a transaction to be considered final, it has to be posted on L1. State updates are a three step process: first blocks are committed to L1, then they are proved, and then it is possible to execute them."
    },
    "category": "ZK Rollup",
    "provider": "Polygon",
    "tvlWarning": {
      "content": "The TVL is currently shared among all projects using the shared Polygon CDK contracts.",
      "sentiment": "warning"
    },
    "finality": {
      "finalizationPeriod": 0,
      "warnings": {
        "timeToInclusion": "Uniform block distribution is assumed for calculations."
      }
    }
  },
  "config": {
    "escrows": [
      {
        "address": "0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe",
        "newVersion": true,
        "sinceTimestamp": 1679653127,
        "tokens": "*",
        "contract": {
          "address": "0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe",
          "upgradeability": {
            "type": "EIP1967 proxy",
            "implementation": "0x0FeB850B183C57534b56b7d56520133C8f9BDB65",
            "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
          },
          "chain": "ethereum"
        }
      },
      {
        "address": "0xf0CDE1E7F0FAD79771cd526b1Eb0A12F69582C01",
        "newVersion": true,
        "sinceTimestamp": 1703945135,
        "tokens": [
          "wstETH"
        ],
        "contract": {
          "address": "0xf0CDE1E7F0FAD79771cd526b1Eb0A12F69582C01",
          "upgradeability": {
            "type": "EIP1967 proxy",
            "implementation": "0x18FED1E19dC564DC917D203be9d40790472D22e9",
            "admin": "0x0000000000000000000000000000000000000000"
          },
          "chain": "ethereum",
          "description": "Escrow for wstETH",
          "upgradableBy": [
            "EscrowAdmin"
          ]
        }
      },
      {
        "address": "0x70E70e58ed7B1Cec0D8ef7464072ED8A52d755eB",
        "newVersion": true,
        "sinceTimestamp": 1700125979,
        "tokens": [
          "USDC"
        ],
        "contract": {
          "address": "0x70E70e58ed7B1Cec0D8ef7464072ED8A52d755eB",
          "upgradeability": {
            "type": "EIP1967 proxy",
            "implementation": "0xA4e6762eAAf259DA74696F46fAAF79bA9DdE14E6",
            "admin": "0xf694C9e3a34f5Fa48b6f3a0Ff186C1c6c4FcE904"
          },
          "chain": "ethereum",
          "description": "Escrow for USDC",
          "upgradableBy": [
            "EscrowAdmin"
          ]
        }
      },
      {
        "address": "0x4A27aC91c5cD3768F140ECabDe3FC2B2d92eDb98",
        "newVersion": true,
        "sinceTimestamp": 1695199499,
        "tokens": [
          "DAI",
          "sDAI"
        ],
        "contract": {
          "address": "0x4A27aC91c5cD3768F140ECabDe3FC2B2d92eDb98",
          "upgradeability": {
            "type": "EIP1967 proxy",
            "implementation": "0xF684f2CB299cCDaAB483ffc1573B82f40C6b775b",
            "admin": "0x0000000000000000000000000000000000000000"
          },
          "chain": "ethereum",
          "description": "Escrow for DAI",
          "upgradableBy": [
            "EscrowAdmin"
          ]
        }
      }
    ],
    "transactionApi": {
      "type": "rpc",
      "defaultUrl": "https://polygon-rpc.com/zkevm",
      "defaultCallsPerMinute": 500,
      "startBlock": 1
    },
    "trackedTxs": [
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "batchSubmissions"
          },
          {
            "type": "l2costs",
            "subtype": "batchSubmissions"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x519E42c24163192Dca44CD3fBDCEBF6be9130987",
          "selector": "0xecef3f99",
          "functionSignature": "function sequenceBatches(tuple(bytes transactions, bytes32 forcedGlobalExitRoot, uint64 forcedTimestamp, bytes32 forcedBlockHashL1)[] batches, address l2Coinbase)",
          "sinceTimestampInclusive": 1707824735,
          "untilTimestampExclusive": 1710419699
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "batchSubmissions"
          },
          {
            "type": "l2costs",
            "subtype": "batchSubmissions"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x519E42c24163192Dca44CD3fBDCEBF6be9130987",
          "selector": "0xdef57e54",
          "functionSignature": "function sequenceBatches(tuple(bytes transactions, bytes32 forcedGlobalExitRoot, uint64 forcedTimestamp, bytes32 forcedBlockHashL1)[] batches, uint64 maxSequenceTimestamp, uint64 initSequencedBatch, address l2Coinbase)",
          "sinceTimestampInclusive": 1710419699
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "batchSubmissions"
          },
          {
            "type": "l2costs",
            "subtype": "batchSubmissions"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
          "selector": "0x5e9145c9",
          "functionSignature": "function sequenceBatches((bytes,bytes32,uint64,uint64)[] batches,address l2Coinbase)",
          "sinceTimestampInclusive": 1679653163,
          "untilTimestampExclusive": 1707824735
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "stateUpdates"
          },
          {
            "type": "l2costs",
            "subtype": "stateUpdates"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
          "selector": "0x2b0006fa",
          "functionSignature": "function verifyBatchesTrustedAggregator(uint64 pendingStateNum,uint64 initNumBatch,uint64 finalNewBatch,bytes32 newLocalExitRoot,bytes32 newStateRoot,bytes32[24] proof)",
          "sinceTimestampInclusive": 1679653163,
          "untilTimestampExclusive": 1707822059
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "stateUpdates"
          },
          {
            "type": "l2costs",
            "subtype": "stateUpdates"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
          "selector": "0x621dd411",
          "functionSignature": "function verifyBatches(uint64 pendingStateNum,uint64 initNumBatch,uint64 finalNewBatch,bytes32 newLocalExitRoot,bytes32 newStateRoot,bytes32[24] calldata proof) ",
          "sinceTimestampInclusive": 1679653163,
          "untilTimestampExclusive": 1707822059
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "stateUpdates"
          },
          {
            "type": "l2costs",
            "subtype": "stateUpdates"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
          "selector": "0x1489ed10",
          "functionSignature": "function verifyBatchesTrustedAggregator(uint32,uint64,uint64,uint64,bytes32,bytes32,address,bytes32[24])",
          "sinceTimestampInclusive": 1707822059
        }
      },
      {
        "uses": [
          {
            "type": "liveness",
            "subtype": "stateUpdates"
          },
          {
            "type": "l2costs",
            "subtype": "stateUpdates"
          }
        ],
        "query": {
          "formula": "functionCall",
          "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
          "selector": "0x87c20c01",
          "functionSignature": "function verifyBatches(uint32,uint64,uint64,uint64,bytes32,bytes32,address,bytes32[24])",
          "sinceTimestampInclusive": 1707822059
        }
      }
    ],
    "liveness": {
      "duplicateData": {
        "from": "stateUpdates",
        "to": "proofSubmissions"
      }
    },
    "finality": {
      "type": "PolygonZkEvm",
      "minTimestamp": 1679653163,
      "lag": 0,
      "stateUpdate": "disabled"
    }
  },
  "chainConfig": {
    "name": "polygonzkevm",
    "chainId": 1101,
    "explorerUrl": "https://zkevm.polygonscan.com",
    "explorerApi": {
      "url": "https://api-zkevm.polygonscan.com/api",
      "type": "etherscan"
    },
    "minTimestampForTvl": 1679679015,
    "multicallContracts": [
      {
        "address": "0xcA11bde05977b3631167028862bE2a173976CA11",
        "batchSize": 150,
        "sinceBlock": 57746,
        "version": "3"
      }
    ]
  },
  "dataAvailability": {
    "layer": {
      "value": "Ethereum (calldata)",
      "sentiment": "good",
      "description": "The data is posted to Ethereum as calldata."
    },
    "bridge": {
      "value": "Enshrined",
      "sentiment": "good",
      "description": "The validating bridge has access to all the data, as it is posted on chain."
    },
    "mode": "Transactions data"
  },
  "riskView": {
    "stateValidation": {
      "value": "ZK proofs (SN)",
      "description": "zkSNARKS are zero knowledge proofs that ensure state correctness, but require trusted setup.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "dataAvailability": {
      "value": "On chain",
      "description": "All of the data needed for proof construction is published on Ethereum L1. Unlike most ZK rollups transactions are posted instead of state diffs.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonZkEVMEtrog",
          "references": []
        }
      ]
    },
    "exitWindow": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    },
    "sequencerFailure": {
      "value": "No mechanism",
      "description": "There is no mechanism to have transactions be included if the sequencer is down or censoring. Although the functionality exists in the code, it is currently disabled.",
      "sentiment": "bad",
      "sources": [
        {
          "contract": "PolygonZkEVMEtrog",
          "references": []
        }
      ]
    },
    "proposerFailure": {
      "value": "Self propose",
      "description": "If the Proposer fails, users can leverage the source available prover to submit proofs to the L1 bridge. There is a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state.",
      "sentiment": "good",
      "sources": [
        {
          "contract": "PolygonRollupManager",
          "references": [
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
            "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
          ]
        }
      ]
    },
    "destinationToken": {
      "value": "Native & Canonical",
      "description": "ETH transferred via this bridge is used to pay for gas and other tokens transferred are considered canonical on the destination chain.",
      "sentiment": "good"
    },
    "validatedBy": {
      "value": "Ethereum",
      "description": "Smart contracts on Ethereum validate all bridge transfers.",
      "sentiment": "good"
    },
    "sourceUpgradeability": {
      "value": "None",
      "description": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d.",
      "sentiment": "bad",
      "warning": {
        "value": "The Security Council can remove the delay on upgrades.",
        "sentiment": "bad"
      }
    }
  },
  "stage": {
    "stage": "Stage 0",
    "missing": {
      "nextStage": "Stage 1",
      "requirements": [
        "Users' withdrawals can be censored by the permissioned operators.",
        "Upgrades executed by actors with more centralized control than a Security Council provide less than 7d for users to exit if the permissioned operator is down or censoring.",
        "Security Council members are not publicly known."
      ]
    },
    "summary": [
      {
        "stage": "Stage 0",
        "requirements": [
          {
            "satisfied": true,
            "description": "The project calls itself a rollup."
          },
          {
            "satisfied": true,
            "description": "L2 state roots are posted to Ethereum L1."
          },
          {
            "satisfied": true,
            "description": "Inputs for the state transition function are posted to L1."
          },
          {
            "satisfied": true,
            "description": "A source-available node exists that can recreate the state from L1 data. Please note that the L2BEAT team has not verified the validity of the node source code. [View code](https://github.com/0xPolygonHermez/zkevm-node)"
          }
        ]
      },
      {
        "stage": "Stage 1",
        "requirements": [
          {
            "satisfied": true,
            "description": "A complete and functional proof system is deployed."
          },
          {
            "satisfied": false,
            "description": "Users' withdrawals can be censored by the permissioned operators."
          },
          {
            "satisfied": false,
            "description": "Upgrades executed by actors with more centralized control than a Security Council provide less than 7d for users to exit if the permissioned operator is down or censoring."
          },
          {
            "satisfied": false,
            "description": "Security Council members are not publicly known."
          }
        ]
      },
      {
        "stage": "Stage 2",
        "requirements": [
          {
            "satisfied": false,
            "description": "Upgrades unrelated to on-chain provable bugs provide less than 30d to exit."
          },
          {
            "satisfied": false,
            "description": "The Security Council's actions are not confined to on-chain provable bugs."
          }
        ]
      }
    ]
  },
  "technology": {
    "newCryptography": {
      "name": "Zero knowledge STARK and SNARK cryptography is used",
      "description": "Despite their production use zkSTARKs and zkSNARKs proof systems are still relatively new, complex and they rely on the proper implementation of the polynomial constraints used to check validity of the Execution Trace. In addition zkSNARKs require a trusted setup to operate.",
      "risks": [
        {
          "category": "Funds can be lost if",
          "text": "the proof system is implemented incorrectly."
        }
      ],
      "references": [
        {
          "text": "PolygonZkEVMEtrog.sol - Etherscan source code, verifyBatches function",
          "href": "https://etherscan.io/address/0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2"
        }
      ]
    },
    "stateCorrectness": {
      "name": "Validity proofs ensure state correctness",
      "description": "Each update to the system state must be accompanied by a ZK proof that ensures that the new state was derived by correctly applying a series of valid user transactions to the previous state. These proofs are then verified on Ethereum by a smart contract.",
      "risks": [],
      "references": [
        {
          "text": "PolygonRollupManager.sol - Etherscan source code, _verifyAndRewardBatches function",
          "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
        }
      ]
    },
    "dataAvailability": {
      "name": "All transaction data is recorded on chain",
      "description": "All executed transactions are submitted to an on chain smart contract. The execution of the rollup is based entirely on the submitted transactions, so anyone monitoring the contract can know the correct state of the rollup chain.",
      "risks": [],
      "references": [
        {
          "text": "PolygonZkEVMEtrog.sol - Etherscan source code, sequenceBatches function",
          "href": "https://etherscan.io/address/0x519E42c24163192Dca44CD3fBDCEBF6be9130987"
        }
      ]
    },
    "operator": {
      "name": "The system has a centralized sequencer",
      "description": "Only a trusted sequencer is allowed to submit transaction batches. A mechanism for users to submit their own batches is currently disabled.",
      "risks": [
        {
          "category": "MEV can be extracted if",
          "text": "the operator exploits their centralized position and frontruns user transactions."
        },
        {
          "category": "Funds can be frozen if",
          "text": "the sequencer refuses to include an exit transaction.",
          "isCritical": true
        }
      ],
      "references": [
        {
          "text": "PolygonZkEVMEtrog.sol - Etherscan source code, onlyTrustedSequencer modifier",
          "href": "https://etherscan.io/address/0x2650a9a4fC64f63F573EF0F405064EF54BC46f71"
        }
      ]
    },
    "forceTransactions": {
      "name": "Users can't force any transaction",
      "description": "The mechanism for allowing users to submit their own transactions is currently disabled.",
      "risks": [
        {
          "category": "Users can be censored if",
          "text": "the operator refuses to include their transactions."
        }
      ],
      "references": [
        {
          "text": "PolygonZkEVMEtrog.sol - Etherscan source code, forceBatchAddress address",
          "href": "https://etherscan.io/address/0x2650a9a4fC64f63F573EF0F405064EF54BC46f71"
        }
      ]
    },
    "exitMechanisms": [
      {
        "name": "Regular exit",
        "description": "The user initiates the withdrawal by submitting a regular transaction on this chain. When the block containing that transaction is proven the funds become available for withdrawal on L1. Finally the user submits an L1 transaction to claim the funds. This transaction requires a merkle proof.",
        "risks": [],
        "references": [
          {
            "text": "PolygonZkEvmBridgeV2.sol - Etherscan source code, claimAsset function",
            "href": "https://etherscan.io/address/0x0FeB850B183C57534b56b7d56520133C8f9BDB65"
          }
        ]
      }
    ]
  },
  "stateDerivation": {
    "nodeSoftware": "Node software can be found [here](https://github.com/0xPolygonHermez/zkevm-node).",
    "compressionScheme": "No compression scheme yet.",
    "genesisState": "The genesis state, whose corresponding root is accessible as Batch 0 root in the [`_legacyBatchNumToStateRoot`](https://evm.storage/eth/19489007/0x5132a183e9f3cb7c848b0aac5ae0c4f0491b7ab2/_legacyBatchNumToStateRoot#map) variable of PolygonRollupManager, is available [here](https://github.com/0xPolygonHermez/zkevm-contracts/blob/0d0e69a6f299e273343461f6350343cf4b048269/deployment/genesis.json).",
    "dataFormat": "The trusted sequencer batches transactions according to the specifications documented [here](https://docs.polygon.technology/zkEVM/architecture/protocol/transaction-life-cycle/transaction-batching/)."
  },
  "permissions": [
    {
      "name": "ProxyAdminOwner",
      "accounts": [
        {
          "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
          "type": "Contract"
        }
      ],
      "description": "Admin of the PolygonZkEVMEtrog rollup, can set core system parameters like timeouts, sequencer, activate forced transactions and update the DA mode."
    },
    {
      "name": "Sequencer",
      "accounts": [
        {
          "address": "0x148Ee7dAF16574cD020aFa34CC658f8F3fbd2800",
          "type": "EOA"
        }
      ],
      "description": "Its sole purpose and ability is to submit transaction batches. In case they are unavailable users cannot rely on the force batch mechanism because it is currently disabled."
    },
    {
      "name": "Proposer (Trusted Aggregator)",
      "accounts": [
        {
          "address": "0x6329Fe417621925C81c16F9F9a18c203C21Af7ab",
          "type": "EOA"
        },
        {
          "address": "0x20A53dCb196cD2bcc14Ece01F358f1C849aA51dE",
          "type": "EOA"
        }
      ],
      "description": "The trusted proposer (called Aggregator) provides ZK proofs for all the supported systems. In case they are unavailable a mechanism for users to submit proofs on their own exists, but is behind a 5d delay for proving and a 5d delay for finalizing state proven in this way. These delays can only be lowered except during the emergency state."
    },
    {
      "name": "SecurityCouncil",
      "description": "The Security Council is a multisig that can be used to trigger the emergency state which pauses bridge functionality, restricts advancing system state and removes the upgradeability delay. This is a Gnosis Safe with 6 / 8 threshold.",
      "accounts": [
        {
          "address": "0x37c58Dfa7BF0A165C5AAEdDf3e2EdB475ac6Dcb6",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "SecurityCouncil participants",
      "description": "Those are the participants of the SecurityCouncil.",
      "accounts": [
        {
          "address": "0xFe45baf0F18c207152A807c1b05926583CFE2e4b",
          "type": "EOA"
        },
        {
          "address": "0xaF46a0ddf80DFFB49C87656625E65A37499B261D",
          "type": "EOA"
        },
        {
          "address": "0xBDc235cC9d6Baa641c5ae306bc83962475A5FEFf",
          "type": "EOA"
        },
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0x3ab9f4b964eE665F7CDf1d65f1cEEc6196B0D622",
          "type": "EOA"
        },
        {
          "address": "0x49c15936864690bCd6af0ecaca8E874adFF30E86",
          "type": "EOA"
        },
        {
          "address": "0x9F7dfAb2222A473284205cdDF08a677726d786A0",
          "type": "EOA"
        },
        {
          "address": "0x21887c89368bf918346c62460e0c339113801C28",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "Forced Batcher",
      "accounts": [
        {
          "address": "0x242daE44F5d8fb54B198D03a94dA45B5a4413e21",
          "type": "MultiSig"
        }
      ],
      "description": "Sole account allowed to submit forced transactions. If this address is the zero address, anyone can submit forced transactions."
    },
    {
      "name": "RollupManagerAdminMultisig",
      "description": "Admin of the PolygonRollupManager contract, can set core system parameters like timeouts and aggregator as well as deactivate emergency state. They can also upgrade the PolygonZkEVMEtrog contracts, but are restricted by a 10d delay unless rollup is put in the Emergency State. This is a Gnosis Safe with 2 / 3 threshold.",
      "accounts": [
        {
          "address": "0x242daE44F5d8fb54B198D03a94dA45B5a4413e21",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "RollupManagerAdminMultisig participants",
      "description": "Those are the participants of the RollupManagerAdminMultisig.",
      "accounts": [
        {
          "address": "0x4c1665d6651ecEfa59B9B3041951608468b18891",
          "type": "EOA"
        },
        {
          "address": "0xA0B02B28920812324f1cC3255bd8840867d3f227",
          "type": "EOA"
        },
        {
          "address": "0xEad77b01ea770839F7f576Cd1516Ff6A298d9dB2",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "EscrowsAdmin",
      "description": "Escrows Admin can instantly upgrade wstETH, DAI and USDC bridges. This is a Gnosis Safe with 5 / 10 threshold.",
      "accounts": [
        {
          "address": "0xf694C9e3a34f5Fa48b6f3a0Ff186C1c6c4FcE904",
          "type": "MultiSig"
        }
      ],
      "chain": "ethereum"
    },
    {
      "name": "EscrowsAdmin participants",
      "description": "Those are the participants of the EscrowsAdmin.",
      "accounts": [
        {
          "address": "0x099198353446A9E3a20672eDC1Bd461E978842c3",
          "type": "EOA"
        },
        {
          "address": "0xb771380f912E4b5F6beDdf81314C383c13F16ab5",
          "type": "EOA"
        },
        {
          "address": "0xD09971D8ed6C6a5e57581e90d593ee5B94e348D4",
          "type": "EOA"
        },
        {
          "address": "0xc4591c41e01a7a654B5427f39Bbd1dEe5bD45D1D",
          "type": "EOA"
        },
        {
          "address": "0xE6Ee0F8D81170160d50ed77b9C91E6219473d43a",
          "type": "EOA"
        },
        {
          "address": "0xd1B856ee12Bd00922cae8DD86ab068f8c0F95224",
          "type": "EOA"
        },
        {
          "address": "0xF53D1fB2EeD22Cf1E8f7E90Da7f1CAe88344065F",
          "type": "EOA"
        },
        {
          "address": "0xf56AE6520776934127AB68438d1b4652BCe07F8f",
          "type": "EOA"
        },
        {
          "address": "0x4DE44Aa0Ef9DB64DF3eB3465d35D73d0409d44ed",
          "type": "EOA"
        },
        {
          "address": "0x4E83124eD15b13265240B61EC9627797CCE1032E",
          "type": "EOA"
        }
      ],
      "chain": "ethereum"
    }
  ],
  "contracts": {
    "addresses": [
      {
        "name": "PolygonZkEVMEtrog",
        "address": "0x519E42c24163192Dca44CD3fBDCEBF6be9130987",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x2650a9a4fC64f63F573EF0F405064EF54BC46f71",
          "admin": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2"
        },
        "chain": "ethereum",
        "description": "The main contract of the Polygon zkEVM. Contains sequenced transaction batch hashes and forced transaction logic.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "PolygonzkEVMVerifier",
        "address": "0x0775e11309d75aA6b0967917fB0213C5673eDf81",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "An autogenerated contract that verifies ZK proofs in the PolygonRollupManager system."
      },
      {
        "name": "PolygonRollupManager",
        "address": "0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x3b82Da772c825283d85d5d6717A77C6Ff582053b",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "It defines the rules of the system including core system parameters, permissioned actors as well as emergency procedures. The emergency state can be activated either by the Security Council, by proving a soundness error or by presenting a sequenced batch that has not been aggregated before a 7d timeout. This contract receives L2 state roots as well as ZK proofs.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Bridge",
        "address": "0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x0FeB850B183C57534b56b7d56520133C8f9BDB65",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "The escrow contract for user funds. It is mirrored on the L2 side and can be used to transfer both ERC20 assets and arbitrary messages. To transfer funds a user initiated transaction on both sides is required.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "GlobalExitRootV2",
        "address": "0x580bda1e7A0CFAe92Fa7F6c20A3794F169CE3CFb",
        "upgradeability": {
          "type": "EIP1967 proxy",
          "implementation": "0x2E38cD55163137483E30580Cb468C2dFf1d85077",
          "admin": "0x0F99738B2Fc14D77308337f3e2596b63aE7BCC4A"
        },
        "chain": "ethereum",
        "description": "Synchronizes deposit and withdraw merkle trees across L1 and the L2s. The global root from this contract is injected into the L2 contracts.",
        "upgradableBy": [
          "RollupManagerAdminMultisig"
        ],
        "upgradeDelay": "None",
        "upgradeConsiderations": "Even though there is a 10d Timelock for upgrades, forced transactions are disabled. Even if they were to be enabled, user withdrawals can be censored up to 15d."
      },
      {
        "name": "Timelock",
        "address": "0xEf1462451C30Ea7aD8555386226059Fe837CA4EF",
        "upgradeability": {
          "type": "immutable"
        },
        "chain": "ethereum",
        "description": "Contract upgrades have to go through a 10d timelock unless the Emergency State is activated. It can also add rollup types that can be used to upgrade verifier contracts of existing systems. It is controlled by the ProxyAdminOwner."
      }
    ],
    "references": [
      {
        "text": "State injections - stateRoot and exitRoot are part of the validity proof input.",
        "href": "https://etherscan.io/address/0x3b82Da772c825283d85d5d6717A77C6Ff582053b"
      }
    ],
    "risks": [
      {
        "category": "Funds can be stolen if",
        "text": "a contract receives a malicious code upgrade. There is a 10d delay on code upgrades."
      }
    ]
  },
  "upgradesAndGovernance": "All main contracts and the verifier are upgradable by the 2 / 3 `ProxyAdminOwner` through a timelock that owns `SharedProxyAdmin`. Addresses of trusted sequencer, aggregator and operational parameters (like fees) on the `PolygonRollupManager` can be instantly set by the `ProxyAdminOwner`. Escrow contracts are upgradable by the `EscrowsAdmin` 5 / 10 multisig.\n\n`PolygonZkEVMTimelock` is a modified version of TimelockController that disables delay in case of a manually enabled or triggered emergency state in the `PolygonRollupManager`. It otherwise has a 10d delay.\n\nThe process to upgrade the `PolygonRollupManager`-implementation and / or the verifier has two steps: 1) A newRollupType-transaction is added by the `ProxyAdminOwner` to the timelock, which in turn can call the `addNewRollupType()` function in the `PolygonRollupManager`. In a non-emergency state, this allows potential reviews of the new rollup type while it sits in the timelock. 2) After the delay period, the rollup implementation can be upgraded to the new rollup type by the `ProxyAdminOwner` calling the `updateRollup()`-function in the `PolygonRollupManager` directly.\n\nThe critical roles in the `PolygonRollupManager` can be changed through the timelock, while the trusted Aggregator role can be granted by the `ProxyAdminOwner` directly.\n\nThe 6 / 8 `SecurityCouncil` multisig can manually enable the emergency state in the `PolygonRollupManager`.",
  "milestones": [
    {
      "name": "Polygon zkEVM Etrog upgrade",
      "link": "https://docs.polygon.technology/zkEVM/architecture/protocol/etrog-upgrade/#etrog-upgrade",
      "date": "2024-02-13",
      "description": "Polygon zkEVM is upgraded to the Polygon Etrog version."
    },
    {
      "name": "Polygon zkEVM Mainnet Beta is Live",
      "link": "https://polygon.technology/blog/polygon-zkevm-mainnet-beta-is-live?utm_source=twitter&utm_medium=social&utm_campaign=zkevm-launch&utm_term=mainnet-beta-live&utm_content=blog",
      "date": "2023-03-27T00:00:00Z",
      "description": "Polygon zkEVM public beta launched."
    }
  ],
  "knowledgeNuggets": [
    {
      "title": "State diffs vs raw tx data",
      "url": "https://twitter.com/krzKaczor/status/1641505354600046594",
      "thumbnail": "l2beat-03.jpg"
    }
  ]
}